# Принципы ACID
*теги:* #sql #database 

---
**Любые dml команды проходят как транзакции.**

[[COMMIT]] - подтверждение транзакции. Пока вы не сделаете commit, изменения в вашей бд не будут видны для других.
[[ROLLBACK]] - отмена транзакции. 
[[SAVEPOINT]] - позволяет разбивать транзакцию на несколько логических частей. Откаты можно делать до savepint.

**При использование DDL команд, коммиты происходят автоматически**

## Atomicity
A - ==атомарность==. Она говорит, что изменения совершаются как транзакции.

## Consistency
C - ==согласованость==. Означает, что результат вашего запроса должен быть согласован с состоянием таблицы на момент, когда была запущено таблица (во время выполнения запроса она может быть изменена).

## Isolation
I - ==изолированность==. Если с таблицей работают несколько людей, то они не видят изменнеия, которые делают другие, пока они не сделают commit.

## Durable
D - долговечность. Означает, что при завершении транзакции все изменения должны быть видны всем и они не должны быть утеряны.


# Select for update
Если вы хотите работать с некой таблицей и вам необходимо, чтобы люди в других сессиях не могли вносить в эту таблицу изменения, вы можете повесить на эту таблицу замок:
```sql
select * from  new_emps for update;
```

Когда вы сделает коммит, замок снимиться, и если кто-то пытался внести изменения в таблицу, то эти изменнеия внесуться

Замок можно ставить также и для отдельных строк, а не для всех таблицы:
```sql
select * from new_emps where emp_id > 900 for update;
```