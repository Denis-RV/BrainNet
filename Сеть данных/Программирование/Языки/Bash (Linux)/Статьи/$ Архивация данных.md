# Архивация данных

tags: #linux 
description: https://interface31.ru/tech_it/2019/09/sozdanie-inkremental-nyh-i-differencial-nyh-arhivov-pri-pomoshhi-tar.html
need to know: [[Bash синтаксис]]
link: [[$ 3.5 Архивация и резервное копирование]]

---

Архивация:

```bash
# --crate --gzip --file
$ tar -cf myZipTar ../Data #заархивировать без сжатия
$ tar -cvzf myZipTar ../Data #добавим вывод подробрностей архивации
$ tar tf mytar.tar #вывод содержимого заархивированной папки
#--extract --
$ tar xvf mytar.tar #распаковка архива или сжатого архива

$ gzip file.tar #сжатие архива gzip
$ tar czf myGZIP.gz #Заархивировать и сжать папку Data в файл myZipTar
$ gnzip file.tg #расжать gzip

$ bzip2 file.tar #сжатие архива bzip
$ bnzip2 file.bz2 #расжать bzip
$ tar cjf myBZIP2.bz2 ../Data

$ xz file.tar #сжатие архива xz
$ tar cJf myBZIP2.xz ../Data

$ zip -r myZip.zip ../Data #сжатие в зип-файл
$ unzip myZip.zip #распаковка
```

Если нужно копировать не всё, то следует указать исключения, для этого используются две опции: **-exclude** и **--exclude-from**. Первая позволяет просто указать файл, папку или паттерн для исключения. Например:

```
--exclude=*.tmp

```

Данная запись исключает файлы с расширением **tmp** внутри копируемой директории.

```
--exclude=dir1/tmp
```

А такая конструкция предписывает не копировать директорию dir1/tmp. Обратите внимание, что все пути указываются относительно директории архивируемой директории, т.е. в нашем случае полный путь к папке будет ~/my_folder/dir1/tmp.

Если нужно исключить сразу несколько объектов, то опцию следует использовать нужное число раз.

Это может быть неудобно, поэтому можно поместить исключаемые объекты в отдельный файл, по одной записи на строку и использовать его совместно с другой опцией:

```
--exclude-from=exclude.list
```

Составляя списки учтите, что записи обрабатываются "дословно", поэтому обращайте внимание на наличие пробелов, они не видны в редакторе, но являются самой частой причиной того, что списки не работают как надо.

(Про скрипты)

Также мы используем переносы строки, чтобы улучшить читабельность скрипта, для этих целей используется символ обратного слеша, который следует отделить пробелом от текста команды. Эта же запись в строку будет выглядеть так: