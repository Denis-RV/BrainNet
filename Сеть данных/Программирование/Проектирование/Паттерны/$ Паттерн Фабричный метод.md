# Паттерн Фабричный метод
*alternative names:* factory method
*теги:* #python #java #проектирование 
*type:* #проектирование/паттерн/порождающий
*описание:* Определяет общий интерфейс для создания объектов в суперклассе, возволяя подклассам изменять тип создаваемых объектов.

---
### Проблема
У вас есть программа с транспортной первозкой, где у вас есть класс "грузовик". Большая часть кода жестко привязана к этому классу. Вдруг возникает необходимость добавить класс "Морское судно". Чтобы это сделать, понадобиться перелопатить влю программу, и так с добавлением каждого класса. В итоге вы получите ужасный код из условных операторов, которые выполняют то или иной действие в зависимости от класса транспорта.

### Решение
Паттерн **Фабричный метод** предлагает создавать объекты не напрямую, используя оператор `new`, а через вызов особого фабричного метода. ![[Pasted image 20210202021544.png]]. Так, вы можете переопределить фабричный метод в подклассе, чтобы изменить тип создаваемого продукта. Для работоспособности системы все возвращаемые объекты должны иметь общий интерфейс: ![[Pasted image 20210202021749.png]]

### Структура решения
![[Pasted image 20210202021914.png]]
1. **Продукт** определяет общий интерфейс объектов, которые может произвести создатель и его подклассы.
2. **Конкретные продукты** содержат код различных продуктов. ПРодукты будут отличаться реализацией, но интерфейс у них будет общий.
3. **Создатель** объявляет фабричный метод, создающий объекты через общий интерфейс продуктов.
	Зачастую фабричный метод объявляют абстрактным, чтобы заставить все подклассы реализовать фабричный метод по-своему. Однако он может возвращать и какой-то продукт по умолчанию.
4. **Конкретные создатели** по-своему реализуют фабричный метод, производя те или иные конкретные продукты.
	Фабричный метод не обязан всё время создавать новые объекты. Его можно переписать так, чтобы возвращать существующие объекты из какого-то хранилища или кэша.
	
### Псевдокод

### Применимость

### Шаги реализации
1. Приведите все создаваемые продукты к общему интерфейсу.
2. В классе, который производит продукты, создайте пустой фабричный метод. В качестве возвращаемого типа укажите общий интерфейс продукта.


### Преимущества и недостатки
==Преимущества==:
- Избавляет класс от привязки к конкретным классам продуктов.
- Выделяет код производства продуктов в одно место, упрощая поддержку кода.
- Упрощает добавление новых продуктов в программу.
- Реализует принцип открытости/закрытости.

==Недостатки==:
- Может привести к созданию больших параллельных иерархий классов, так как для каждого класса продукта надо создать свой подкласс создателя.

### Отношения с другими паттернами 
• Многие архитектуры начинаются с применения Фабричного метода (более простого и расширяемого через подклассы) и эволюционируют в сторону [[$- Паттерн Абстрактная фабрика]], [[$- Паттерн Prototype]] или [[$- Паттерн Builder]] (более гибких, но и более сложных).

• Классы [[$- Паттерн Абстрактная фабрика]] чаще всего реализуются с помощью Фабричного метода, хотя они могут быть построены и на основе [[$- Паттерн Prototype]].

• Фабричный метод можно использовать вместе с [[$- Паттерн Iterator]], чтобы подклассы коллекций могли создавать подходящие им итераторы.

• [[$- Паттерн Prototype]] не опирается на наследование, но ему нужна сложная операция инициализации. Фабричный метод наоборот, построен на наследовании, но не требует сложной инициализации.

• Фабричный метод можно рассматривать как частный случай [[$- Паттерн Template method]]. Кроме того, Фабричный метод нередко бывает частью большого класса с Шаблонными методами.