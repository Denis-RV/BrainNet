# Введение в Vim
*теги:* #linux #text_editing 

---
# Режимы VIM
Vim - режимный редактор. После запуска вы оказываетесь в ==командном режиме==, который не предназначен для редактирования файлов.

## Командный режим
**Основные команды:**
- `vim` - запуск вима
- `:q` - выйти из vim
- `:q!` - принудительно выйти из vim
- `Esc+Esc` - вернуться в начальное окно (если вы заблудились и переключились в какой-то режим)
- `:w` - сохранить изменения. Можно также указать имя файла

>Данные команды также используются прогарммой `less`.
- `U` - отмена последнего изменения
- `L` (->) - вправо на один символ
- `H` (<-) - влево на один символ
- `J` (стрелка вверх) - вверх
- `K` (стрелка вних) - вниз
- `0` (ноль) - в начало строки
- `Shift+6` (^) - к первому непробельному символу в строке
- `Shift+4` - В конец строки
- `W` (w) - в начало следующего слова или к знаку препинания
- `Shift + W` - в начало следующего слова, минуя знаки препинания
- `B` (b) - в начало предыдущего слова или к знаку препинания
- `Shift+B` - в начало придыдущего слова, миную знак препинания
- `Ctrl+F` (Page Down) - вниз на одну страницу
- `Ctrl+B` (Page Up) - вверх на одну страницу
- `число-Shift+G` - к строке с указанным номером
- `Shift_G` - к последней строке в файле
- `J` - объединение строк.

**Удаление:**![[Pasted image 20210121143248.png]]
*Команда d не просто удаялет текст, она "вырезает" его. Этот текст можно извлечь командой `p` и вставить правее от курсора, или командой `P` левее.**

**Копирование:**![[Pasted image 20210122184542.png]]
`yiw` - копировать текущее слово.

Вставка осуществляется с помощью `p`

С помощью команды `:r fileName` вы можете вставить текст некого файла в текущий файл.

**Поиск и замена:**
- `f` выполняет поиск в строке и перемещает курсор к следующему вхожднеию указанного символа. Затем операцию можно повторить, введя `;`.
- `/` - для перемещнеия курсора к следующему вхождению слова или фразы. Переход к последющим вхождениям осуществляется с помощью `n`. Можно использовать регулярные выражения ([[$ Regex в Linux]], [[$ Regex введение]])

Многие команды в vim могут начинаться с числа, обозначающего количество раз повротов выполнения команды.

### Глобальный поиск и замена
Для этого используются ex-команды. Пример, в котором мы заменяем слово Строка словом запись:

>:%s/Строка/запись/g

![[Pasted image 20210122232400.png]]

Вы также можете добавить символ `c` в конец команды:
```bash
:%s/Строка/строка/gc
>>>replace with path (y/n/a/q/l/^E/^Y)
```
![[Pasted image 20210122233659.png]]


## Режим втсавки
Для перехода в этот режим необходимо нажать клавишу `i` или `a` (если мы в конце строки и нажимаем a, то курсор перемещается за конец строки. Таким способом удобно добавлять информацию). Чтобы вернуться в командный режим, нажмите `Esc`. 

- `A` - перемещение за конец строки с переходом в режим вставки.
- `o` - добавление строки ниже и переход в режим вставки.
- `O` -  добавление строки выше и переход в режим вставки.

## Редактирование нескольких файлов
Если вам нужно отредактированть несколько файлов следующим образом:
`vim file1 file2 file3`

Для переключения между файлами введите:
`:n`

Для возвращения в прошлый файл:
`:N`

Если вы внесли изменения и пытайтесь перейти в другой файл, вы можете сделать это только принудительно (с помощью `!`), но в таком случае изменения не будут сохранены.

Команда `:buffers` выводит список редактируемых файлов. Для перехода к буфферу 2 введите команду: `:buffer 2`.

Команда `:e [fileName]` позволяет открыть или создать еще один файл. Файлы, открытые командой :e , недоступны для команд :n и :N . Чтобы переключиться на такие файлы, используйте команду :buffer с номером буфера.

