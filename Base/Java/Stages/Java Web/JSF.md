# Java Server Faces
*Need to know:* [[Servlets Java]]
*tegs:*
*description:* Model View Controller фреймворк для построения пользовательского интерфейса веб-приложения.
*link:* https://www.youtube.com/watch?v=IHUk1Gx4OGQ&list=PLiJ76e8LBYQVOHd1G3vva9FGV66sdV3N1&index=4

---
Для управления отображением (View) могут использоваться технологии JSP, Facelets, а иногда и другие. JSP устарел.

Источником данных для отображения могут быть как JSF Managed Beans, так и CDI Beans. CDI Beans предпочтительнее, поскольку позволяют безболезненно интегрироваться в Java EE инфраструктуру.

Для JSF есть широкий выбор библиотек компонентов, которые реализуют различные элементы управления - панели, кнопки, списки, таблицы и многое другое.

## Настройка JSF
1. Добавить в файл проекта pom.xml зависимость `javax.faces:jsf-api` версии 2.x
2. Создать файл `имя_файла.xhtml`. Далее можно наполнять файл необходимым контентом в формате XHTML.
3. После сборки и запуска приложения, можно обратиться к странице по адресу `http://host:port/context/имя_страницы.xhtml`

## Создание CDI бина
1. Создать в каталоге с ресурсами (/webapp/WEB-INF иди /resources/META-INF) файл с названием beans.xml. Наличие этого файла включает поддержку CDI.
2. Создать класс с необходимыми данными и методами.
3. Пометить класс аннотацией @Named, которая превращает обычный класс в CDI бин и делает его видимым для JSF страниц.
4. Для обращения к данным CDI бина в нужном месте страницы нужно вставить следующую конструкцию: `#{имяБина.свойствБина}`.
5. Для вызова метода CDI бина нужно вставить в нужном месте страницы аналогичную конструкцию: `#{имяБина.методБина()}`

## Базовые элементы интерфейса JSF
1. Форма ввода - `<h:form>...</h:form>`. Все элементы ввода информации от пользователя должны быть внутри формы. Вложенность формы недопустима.
2. Ввод текста - `<h:inputText value="#{имяБина.свойствоБина}"/>` - сохраняет введенный пользователем текст в указанное свойство бина.
3. Вызов метода бина - `<h:commandLink action="#имяБина.методБина}"/>`. При вызове происходит отсылка данных формы.
4. Вывод табличных данных на основе списка или массива - `<h:dataTable value="#{имяБина.свойствоБинаСписок}">...</hdataTable>`
5. Дублирование любых участков верстки на основе списка или массива - `<ui:repeat value="#{имяБина.свойствоБинаСписок}">...</ui:repeat>`