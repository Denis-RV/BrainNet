# Создание shell сценариев
*Need to know:* [[$ Base  bash commands]]
*status:* Ready
*format:* flow
*tegs:* #linux #programming
*description:*  Объединяя инструменты в программы собственной конструкции, мы можем заставить командную оболочку самостоятельно выполнять сложные последовательности операций. Такие программы называются сценариями командной оболочки.


---
Cценарий командной оболочки — это файл, содержащий последовательность команд. Командная оболочка читает этот файл и выполняет команды, как если бы они вводились вручную в командной строке.

## Формат файла сценария
1. Для создания сценария запустите текстовый редактор и введите это:
	```bash
	#!/bin/bash
	#This is our script
	echo 'Hello, World!'
	# далее сохраните файл как hello.sh
	```
	`#!` - специальная конструкция, которая называется shebang и сообщает системе имя интерпретатора, который должен использоваться для выполнения следующего за ним текста сценария.
2. Сделайте файл выполняемым с помощью chmod:
	```bash
	$ chmod 755 hello.sh
	$ ls -l hello.sh
	>>> -rwxr-xr-x 1 me me 63 2012-03-07...
	```
	`755` - сцераний доступен для выполнения всем
	`700` - сценарий доступен только владельцам.
3. Запускаеф сценарий:
	```bash 
	./hello.sh
	>>>Hello, World!
	```


Cистема просматривает каталоги по списку всякий раз, когда требуется найти исполняемую программу, *если путь к ней не указан явно*. Каталог /bin — один из каталогов, которые система просматривает автоматически. Список каталогов хранится в пе-
ременной окружения PATH . Она содержит список каталогов, перечисленных через двоеточие. Увидеть, что содержится в PATH , можно с помощью команды:
```bash
echo $PATH
>>>/usr/local/sbin:/usr/local/bin:...

#Делаем вомзожность запустить наш скрипт без './'
sudo mv hello.sh /usr/local/sbin
hello.sh
>>>Hello, World!
```

Каталог ~/bin хорошо подходит для сценария, если этот сценарий предназначен для личного использования. Сценарии, которые должны быть доступны всем пользователям в системе, лучше размещать в традиционном местоположении — в каталоге /usr/local/bin. Сценарии, предназначенные для использования системным администратором, часто помещаются в каталог /usr/local/sbin. В большинстве случаев программное обеспечение, созданное в локальной системе, будьто сценарии или скомпилированные программы, следует помещать в иерархию каталогов /usr/local, а не /bin или /usr/bin. Последние два каталога, как определено стандартом иерархии файловой системы Linux (Linux Filesystem Hierarchy Standard), предназначены только для файлов, поставляемых создателями дистрибутива Linux.

Вы можете добавить свой каталог в переменную $PATH:
```bash
cd ~
mkdir bin
export PATH=~/bin:"$PATH"
```

#### Отступы и продолжения строк
При использовании длинных команд, можно повысить их читаемость, распределяя такие команды по нескоьлким строкам:
```bash
ls -al /bin | sort | grep zip | less

#Заменяем на:
ls \
        -all\
        -l\
\
        /bin \
\
        | sort \
        | grep zip \
        | less
```

## Настройка VIM для разработки сценариев 
- `:syntax on` - включает подсветку синтаксиса. Если возникнут сложности, подсветки не будет, попробуйте ввести :set synta=sh.
- `:set hlsearch` - включает подсветку результатов поиска.
- `:set tabstop=4` - определяет число колонок, занимаемых табуляцией.
- `:set autoindent` - включает автоматичское оформление отступов. Заставляет vim добавлять в новую строку отступ. Чтобы прекратить автоматическое выравнивание, нажмите `Ctrl+D`. Это изменение можно сделать постоянным, добавив описанные команды (без двоеточия) в файл ~/.vimrc.

Подробнее о VIM: [[2.2 Введение в vim]]