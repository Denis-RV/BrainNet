# Взгляд на мир глазами командной оболочки
*Need to know:* [[4. Перенаправление ввода и вывода]]
*status:* В процессе
*format:* flow
*tegs:* #linux #programming 
*desckription:*  #task добавить desckritpion

---

## Подстановка
Когда мы нажимаем ENTER, bash выполняет несколько операций с текстом, прежде чем выполнит вашу команду. Когда вы используете \*, происходит подстановка (expansion). То есть то, что вы вводите, замешается чем-то другим.

Рассмотрим, как работает команда ==echo==, которая выводит свои аргументы в стандартный поток вывода:
```bash
$ echo *
>>> file.txt file2.txt dir1 dir2 Dir3
$ echo f*
>>> file.txt file2.txt
$ echo [[:upper:]]*
>>>Dir3
```
Оболочка сделала замену символа \* и поэтому вывелся не он, а готовый результат подстановки.

Мы также можем **заклянуть за пределы каталогов*:
```bash
echo /usr/*/share
>>>/usr/kerberos/share /usr/local/share
```

==Подстановка путей== (pathname expansion) - механизм работы групповых символов.

#### Подстановка пути для скрытых фалйов
Мы можем использовать команду *$ echo .\**, но она может привести к неправильным результатам, так как эти имена соответствуют текущему рабочему каталогу и родительскому каталогу (. и ..). Проверить это моожено введя *$ ls -d .\* | less*. **Для решения проблемы мы используем специальный шаблон**, который замещается именами файлов, начинающимися с точки, за которой следует хотя бы один символ, кроме точки, за которым в свою очередь может следовать любое кол-во символов:
```bash
$ ls -d .[!.]?*
```

#### Подстановка результатов арифметических выражений
Командная оболочка поддерживает подстановку арифметических выражений. Для нее используестя слудующий формат: *$((Выражение))*. Выражения могут содержать вложенные выражения Этот механизм поддерживает только **целые числа**.
```bash
$ echo $((2+2))
>>>4
$ echo $(($(5**2))*3) #echo $(((5**2)*3))
>>>75
```

**Арифметические операторы:** \+, \-, \*, / (деление на цело, результат - целове число), % (остаток от деления), ** (возведение в степень)

#### Подстановка фигурных скобок
С помощью фигурных скогок можно создать множество текстовых строк:
```bash
$ echo VV-{A,B,C}-MM
>>>VV-A-MM VV-B-MM VV-C-MM

#использование диапазона чисел и букв
$ echo ch_{1..3}
>>> ch_1 ch_2 ch_3
$ echo {Z..A}
>>>Z Y X W V U T S R Q P O N M L K J I H G F E D C B 

#создание 30 папок:
$ mkdir dir_{1..30}
```

#### Подстановка параметров
\- это переменные, коорые храянят некоторые данные
```bash
#вывести список доступных переменных:
$ printenv | less

$ echo $USER #хранит ваше имя пользователя
>>>denis
```

Если ошибиться в имени параметра, результатом подстановки будет **пустая строка**.

### Подстановка команд
Подстановка команд позволяет использовать поток вывода команд в качестве аргументов других команд:
```bash
$ echo $(ls)
>>>Desktop Documents ls-output.txt Music Pictures Public Videos

$ ls -l $(which cp) 
>>>-rwxr-xr-x 1 root root 71516 2012-12-05 08:58 /bin/cp

$ file $(ls /usr/bin/* | grep zip)
>>>/usr/bin/bunzip2: symbolic link to \`bzip2'
>>>/usr/bin/gzip: symbolic link to \`../../bin/gzip'
>>>...
```